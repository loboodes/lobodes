<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>استمارة تبادل الزيارات</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ar.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>

<style>
@font-face {
  font-family: 'HelveticaNeueW23';
  src: url('fonts/HelveticaNeueW23-Regular.ttf') format('truetype');
}

body {
  margin: 0;
  padding: 0;
  font-family: 'HelveticaNeueW23', sans-serif;
  background: #ffffff;
}

header {
  background: #15445A;
  color: white;
  text-align: center;
  padding: 10px 0;
}
header h2 { margin: 0; font-size: 18px; font-weight: bold; }

.container {
  max-width: 1200px;
  width: 95%;
  margin: 10px auto;
  background: #ffffff;
  padding: 10px;
  border-radius: 8px;
  box-sizing: border-box;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
}

label {
  font-weight: bold;
  text-align: center;
  margin-bottom: 3px;
  display: block;
  font-size: 12px;
}

input {
  width: 100%;
  height: 30px;
  padding: 0;
  border: 1px solid #666;
  border-radius: 4px;
  text-align: center;
  font-family: 'HelveticaNeueW23', sans-serif;
  font-size: 11px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* تصغير حجم دوائر الراديو */
input[type="radio"] {
  width: 14px;
  height: 14px;
  transform: scale(0.8);
  margin: 0 auto;
  display: block;
}

.tables-container {
  display: flex;
  justify-content: space-between;
  gap: 5px;
  margin-top: 10px;
}

.tables-container table {
  width: 49% !important;
  table-layout: auto !important;
  font-size: 11px !important;
  border-collapse: collapse;
}

th, td {
  padding: 3px !important;
  font-size: 11px !important;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

th { background: #0c8380; color: white; }

.buttons {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

button {
  background: #0c8380;
  color: #fff;
  border: none;
  padding: 8px 0;
  border-radius: 5px;
  cursor: pointer;
  font-size: 13px;
  font-weight: bold;
  width: 100%;
  font-family: 'HelveticaNeueW23', sans-serif;
}

button.deleteBtn { background: #d11a2a; }
button:hover { background: #0a6b69; }

@media (max-width: 768px) {
  .tables-container { flex-direction: column; gap: 8px; }
  .tables-container table { width: 100%; font-size: 10px; }
  button { width: 100%; }
}
</style>
</head>
<body>

<header><h2>استمارة تبادل الزيارات</h2></header>

<div class="container" id="formContent">
  <!-- الحقول -->
  <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:5px; margin-bottom:5px;">
    <div><label>المعلمة المزارة</label><input type="text" id="visitingTeacher"></div>
    <div><label>اليوم</label><input type="text" id="day"></div>
    <div><label>التاريخ</label><input type="text" id="date1" placeholder="اختر التاريخ" style="flex:1;" readonly /></div>
  </div>
  <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:5px; margin-bottom:10px;">
    <div><label>المادة</label><input type="text" id="subject"></div>
    <div><label>الوحدة</label><input type="text" id="unit"></div>
    <div><label>الدرس</label><input type="text" id="lesson"></div>
  </div>

  <!-- الجداول -->
  <div class="tables-container">
    <!-- جدول 1 -->
    <table id="table1">
      <thead>
        <tr><th>م</th><th>البند</th><th>ممتــــاز</th><th>متوسط</th><th>ضعيف</th><th>غير متوفر</th></tr>
      </thead>
      <tbody>
        <tr><td>1</td><td>تحديد أهداف الدرس بوضوح</td><td><input type="radio" name="item1"></td><td><input type="radio" name="item1"></td><td><input type="radio" name="item1"></td><td><input type="radio" name="item1"></td></tr>
        <tr><td>2</td><td>استخدام استراتيجيات متنوعة</td><td><input type="radio" name="item2"></td><td><input type="radio" name="item2"></td><td><input type="radio" name="item2"></td><td><input type="radio" name="item2"></td></tr>
        <tr><td>3</td><td>توظيف الوسائل التعليمية بفاعلية</td><td><input type="radio" name="item3"></td><td><input type="radio" name="item3"></td><td><input type="radio" name="item3"></td><td><input type="radio" name="item3"></td></tr>
        <tr><td>4</td><td>مراعاة الفروق الفردية بين الطالبات</td><td><input type="radio" name="item4"></td><td><input type="radio" name="item4"></td><td><input type="radio" name="item4"></td><td><input type="radio" name="item4"></td></tr>
        <tr><td>5</td><td>تنويع أنماط التعلم داخل الدرس</td><td><input type="radio" name="item5"></td><td><input type="radio" name="item5"></td><td><input type="radio" name="item5"></td><td><input type="radio" name="item5"></td></tr>
        <tr><td>6</td><td>إثارة دافعية الطالبات للتعلم</td><td><input type="radio" name="item6"></td><td><input type="radio" name="item6"></td><td><input type="radio" name="item6"></td><td><input type="radio" name="item6"></td></tr>
        <tr><td>7</td><td>وضوح الشرح والتسلسل المنطقي</td><td><input type="radio" name="item7"></td><td><input type="radio" name="item7"></td><td><input type="radio" name="item7"></td><td><input type="radio" name="item7"></td></tr>
        <tr><td>8</td><td>استخدام الأسئلة الصفية بفاعلية</td><td><input type="radio" name="item8"></td><td><input type="radio" name="item8"></td><td><input type="radio" name="item8"></td><td><input type="radio" name="item8"></td></tr>
        <tr><td>9</td><td>تنمية مهارات التفكير لدى الطالبات</td><td><input type="radio" name="item9"></td><td><input type="radio" name="item9"></td><td><input type="radio" name="item9"></td><td><input type="radio" name="item9"></td></tr>
        <tr><td>10</td><td>إدارة وقت الحصة بفاعلية</td><td><input type="radio" name="item10"></td><td><input type="radio" name="item10"></td><td><input type="radio" name="item10"></td><td><input type="radio" name="item10"></td></tr>
        <tr><td>11</td><td>تعزيز مشاركة الطالبات في الدرس</td><td><input type="radio" name="item11"></td><td><input type="radio" name="item11"></td><td><input type="radio" name="item11"></td><td><input type="radio" name="item11"></td></tr>
        <tr><td>12</td><td>استخدام التقويم البنائي المستمر</td><td><input type="radio" name="item12"></td><td><input type="radio" name="item12"></td><td><input type="radio" name="item12"></td><td><input type="radio" name="item12"></td></tr>
        <tr><td>13</td><td>تشجيع الطالبات على طرح الأسئلة</td><td><input type="radio" name="item13"></td><td><input type="radio" name="item13"></td><td><input type="radio" name="item13"></td><td><input type="radio" name="item13"></td></tr>
        <tr><td>14</td><td>توظيف التقنية في التعليم</td><td><input type="radio" name="item14"></td><td><input type="radio" name="item14"></td><td><input type="radio" name="item14"></td><td><input type="radio" name="item14"></td></tr>
      </tbody>
    </table>

    <!-- جدول 2 -->
    <table id="table2">
      <thead>
        <tr><th>م</th><th>البند</th><th>ممتـــــاز</th><th>متوسط</th><th>ضعيف</th><th>غير متوفر</th></tr>
      </thead>
      <tbody>
        <tr><td>15</td><td>تحفيز الطالبات للعمل الجماعي</td><td><input type="radio" name="item15"></td><td><input type="radio" name="item15"></td><td><input type="radio" name="item15"></td><td><input type="radio" name="item15"></td></tr>
        <tr><td>16</td><td>تنمية القيم والاتجاهات الإيجابية</td><td><input type="radio" name="item16"></td><td><input type="radio" name="item16"></td><td><input type="radio" name="item16"></td><td><input type="radio" name="item16"></td></tr>
        <tr><td>17</td><td>القدرة على ضبط الصف</td><td><input type="radio" name="item17"></td><td><input type="radio" name="item17"></td><td><input type="radio" name="item17"></td><td><input type="radio" name="item17"></td></tr>
        <tr><td>18</td><td>استخدام لغة عربية سليمة</td><td><input type="radio" name="item18"></td><td><input type="radio" name="item18"></td><td><input type="radio" name="item18"></td><td><input type="radio" name="item18"></td></tr>
        <tr><td>19</td><td>مراعاة الفروق الفردية</td><td><input type="radio" name="item19"></td><td><input type="radio" name="item19"></td><td><input type="radio" name="item19"></td><td><input type="radio" name="item19"></td></tr>
        <tr><td>20</td><td>وضوح السبورة والتنظيم</td><td><input type="radio" name="item20"></td><td><input type="radio" name="item20"></td><td><input type="radio" name="item20"></td><td><input type="radio" name="item20"></td></tr>
        <tr><td>21</td><td>إعطاء واجبات منزلية مناسبة</td><td><input type="radio" name="item21"></td><td><input type="radio" name="item21"></td><td><input type="radio" name="item21"></td><td><input type="radio" name="item21"></td></tr>
        <tr><td>22</td><td>توضيح عناصر الدرس للطالبات</td><td><input type="radio" name="item22"></td><td><input type="radio" name="item22"></td><td><input type="radio" name="item22"></td><td><input type="radio" name="item22"></td></tr>
        <tr><td>23</td><td>إبراز النقاط الأساسية في الدرس</td><td><input type="radio" name="item23"></td><td><input type="radio" name="item23"></td><td><input type="radio" name="item23"></td><td><input type="radio" name="item23"></td></tr>
        <tr><td>24</td><td>تنويع طرق التقويم</td><td><input type="radio" name="item24"></td><td><input type="radio" name="item24"></td><td><input type="radio" name="item24"></td><td><input type="radio" name="item24"></td></tr>
        <tr><td>25</td><td>إعطاء أنشطة إثرائية</td><td><input type="radio" name="item25"></td><td><input type="radio" name="item25"></td><td><input type="radio" name="item25"></td><td><input type="radio" name="item25"></td></tr>
        <tr><td>26</td><td>القدرة على استخدام أساليب متنوعة</td><td><input type="radio" name="item26"></td><td><input type="radio" name="item26"></td><td><input type="radio" name="item26"></td><td><input type="radio" name="item26"></td></tr>
        <tr><td>27</td><td>تشجيع الطالبات على التفكير النقدي</td><td><input type="radio" name="item27"></td><td><input type="radio" name="item27"></td><td><input type="radio" name="item27"></td><td><input type="radio" name="item27"></td></tr>
        <tr><td>28</td><td>توظيف الأنشطة الصفية بفاعلية</td><td><input type="radio" name="item28"></td><td><input type="radio" name="item28"></td><td><input type="radio" name="item28"></td><td><input type="radio" name="item28"></td></tr>
      </tbody>
    </table>
  </div>

  <label>الملاحظات</label>
  <div style="display:grid; grid-template-columns:repeat(2,1fr); gap:5px; margin-bottom:10px;">
    <input type="text"><input type="text">
    <input type="text"><input type="text">
  </div>
    
  <label>التوصيات</label>
  <div style="display:grid; grid-template-columns:repeat(2,1fr); gap:5px; margin-bottom:10px;">
    <input type="text"><input type="text">
    <input type="text"><input type="text">
  </div>

  <div style="display:flex; gap:10px; justify-content:center; margin-bottom:10px;">
    <div style="width:200px;"><label>المعلمة الزائرة</label><input type="text"></div>
    <div style="width:200px;"><label>مديرة المدرسة</label><input type="text"></div>
  </div>

  <div class="buttons">
    <button onclick="downloadPDF()">تحميل PDF</button>
  </div>
</div>

<script>
function downloadPDF() {
  const content = document.getElementById("formContent").cloneNode(true);
  content.querySelectorAll("button").forEach(btn => btn.remove());

  const style = document.createElement("style");
  style.innerHTML = `
    .tables-container { display: flex !important; flex-direction: row !important; justify-content: space-between; gap: 5px !important; }
    .tables-container table { width: 49% !important; border-collapse: collapse !important; font-size: 11px !important; }
    th, td { 
      border: 0.3px solid #000 !important; 
      padding: 2px 3px !important; 
      font-size: 11px !important; 
      text-align: center; 
      vertical-align: middle; 
      line-height: 2.0 !important; 
      min-height: 24px !important; 
    }
    input[type="radio"] { width: 14px; height: 14px; transform: scale(0.8); margin: 0 auto; display: block; }
  `;
  content.prepend(style);

  const wrapper = document.createElement("div");
  wrapper.style.position = "relative";
  wrapper.style.width = "210mm";
  wrapper.style.minHeight = "296.5mm";
  wrapper.style.padding = "40mm 10mm 10mm 10mm";
  wrapper.style.boxSizing = "border-box";
  wrapper.style.backgroundImage = 'url("images/background.png")';
  wrapper.style.backgroundSize = "cover";
  wrapper.style.backgroundRepeat = "no-repeat";
  wrapper.style.backgroundPosition = "center";
  wrapper.appendChild(content);

  html2pdf().from(wrapper).set({
    margin: 0,
    filename: 'استمارة_تبادل_الزيارات.pdf',
    html2canvas: { scale: 3, useCORS: true, backgroundColor: null },
    jsPDF: { orientation: 'portrait', unit: 'mm', format: 'a4' }
  }).save();
}

let uploadedImages = [];
document.addEventListener("DOMContentLoaded", function() {
  const dateIds = ['date1'];

  dateIds.forEach(id => {
    const input = document.getElementById(id);
    if (input) {
      flatpickr(input, {
        locale: 'ar',
        disableMobile: true,
        altInput: true,
        altFormat: 'd-MM-yyyy هـ',
        dateFormat: 'Y-m-d',
        onChange: function(selectedDates, dateStr, instance) {
          if (selectedDates.length > 0) {
            const miladi = selectedDates[0];
            miladi.setDate(miladi.getDate() - 1);

            const hijri = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', {
              day: '2-digit',
              month: '2-digit',
              year: 'numeric'
            }).format(miladi);
            instance.altInput.value = hijri;
          }
        }
      });
    }
  });
});
</script>

</body>
</html>
